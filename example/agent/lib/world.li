Section Header

  + name      := WORLD;

  - copyright := "2003-2010 Sonntag Benoit";

  - author    := "Sonntag Benoit (sonntag@icps.u-strasbg.fr)";
  - comment   := "The main prototype";

Section Inherit

  - parent_inbox:INBOX := INBOX;

Section Public

  - agents:FAST_ARRAY(AGENT) := FAST_ARRAY(AGENT).create_with_capacity 128;

  - clone:SELF <-
  (
    crash_with_message "WORLD object is not clonable: There's only one world !\n";
    Self
  );

  - add a:AGENT <-
  (
    agents.add_last a;
  );

  - run <-
  (
    TIMER.add_client Self;
  );

  - receive msg:EVENT <-
  ( + t:EVENT_TIMER;
    // Nothing.
    t ?= msg;
    (t != NULL).if {
      agents.foreach { a:AGENT;
        a.run;
      };
    };
  );
